# Copy to .env and replace all placeholder values before production deploy.

# Server runtime
NODE_ENV=production
SERVER_HOST=0.0.0.0
SERVER_PORT=8788
CORS_ORIGIN=https://app.pocket-brain.org
TRUST_PROXY=true
LOG_LEVEL=info
ALLOW_INSECURE_DEV_AUTH=false
AUTH_DEV_USER_ID=dev-user-local

# Datastores (required by docker-compose + server)
POSTGRES_DB=pocketbrain
POSTGRES_USER=postgres
POSTGRES_PASSWORD=replace-with-strong-postgres-password
# Optional explicit URL override. If empty, render-server-env derives it from values above.
DATABASE_URL=
REDIS_URL=redis://redis:6379

# Application encryption/auth secrets
KEY_ENCRYPTION_SECRET=replace-with-32-byte-secret
STREAM_TICKET_SECRET=replace-with-separate-stream-ticket-secret
STREAM_TICKET_TTL_SECONDS=60

# Clerk server/app keys
CLERK_SECRET_KEY=replace-with-production-clerk-secret-key
CLERK_PUBLISHABLE_KEY=replace-with-production-clerk-publishable-key

# Worker runtime route/auth config
VPS_API_ORIGIN=https://api-origin.pocket-brain.org
CLERK_JWKS_URL=https://clerk.example/.well-known/jwks.json
CLERK_ISSUER=https://clerk.example
CLERK_AUDIENCE=https://app.pocket-brain.org
WORKER_ROUTE_MODE=

# Optional rotation key
KEY_ENCRYPTION_SECRET_PREV=

# Optional operational tuning
REQUIRE_REDIS_FOR_READY=true
MAINTENANCE_INTERVAL_MS=600000
TOMBSTONE_RETENTION_MS=2592000000
NOTE_CHANGES_RETENTION_MS=3888000000
PG_POOL_MAX=20
PG_POOL_IDLE_TIMEOUT_MS=30000
PG_POOL_CONNECTION_TIMEOUT_MS=5000
SYNC_BATCH_LIMIT=100
SYNC_PULL_LIMIT=500

# Cloudflare bootstrap/deploy helpers (optional for local-only work)
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ACCOUNT_ID=
