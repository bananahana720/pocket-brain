name = "pocketbrain-ai-proxy"
main = "src/index.ts"
compatibility_date = "2025-01-01"
account_id = "c3941b01e85131cba914b73b037ffef7"
workers_dev = false
routes = [{ pattern = "app.pocket-brain.org/api/*", zone_name = "pocket-brain.org" }]

[[kv_namespaces]]
binding = "AI_SESSIONS"
id = "23450b2f1c9342c6a1bde8a4eaead79f"

[durable_objects]
bindings = [
  { name = "CONTROL_PLANE_DO", class_name = "ControlPlaneDO" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["ControlPlaneDO"]

[vars]
DEFAULT_MODEL = "google/gemini-2.5-flash"
VPS_API_ORIGIN = "https://api-origin.pocket-brain.org"
VPS_PROXY_TIMEOUT_MS = "10000"
VPS_PROXY_RETRIES = "2"
CLERK_JWKS_URL = "https://clerk.pocket-brain.org/.well-known/jwks.json"
CLERK_ISSUER = "https://clerk.pocket-brain.org"
CLERK_AUDIENCE = "https://api.clerk.com"
ALLOW_INSECURE_DEV_AUTH = "false"
